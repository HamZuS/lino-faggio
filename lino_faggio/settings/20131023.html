<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title id="title">Action Feedback</title>
<link rel="stylesheet" type="text/css" href="media/extjs/resources/css/ext-all.css" />
<script type="text/javascript" src="media/extjs/adapter/ext/ext-base-debug.js"></script>
<script type="text/javascript" src="media/extjs/ext-all-debug.js"></script>
<script type="text/javascript">
function f1() { console.log("f1",arguments) };
function f2() { console.log("f2",arguments) };
function f3() { console.log("f3",arguments) };

Ext.namespace('Lino');

Lino.ActionFeedback = new function() {
    var win, 
        message_panel, details_panel, 
        collapsed_height = 100, 
        expanded_height=200;

    var show = function(title,message_html,details_html) {
        if (!win) {
            message_panel = new Ext.Container({
                border: false,
                layout:"fit",
                //~ items:[{html:message_html}]
                //~ height: 'auto',
                //~ html:message_html
                });
            details_panel = new Ext.Container({
                hidden: true,
                border: false,
                layout:"fit",
                //~ height: 100,
                height: 'auto',
                //~ items: { height: 'auto', html:details_html }
                //~ html:details_html
            });
            
            var main = new Ext.Container({
              height: 'auto',
              items:[message_panel
              ,details_panel
              ]
            });
                            
            var ok = new Ext.Button({
                text: "OK",
                handler: function() {},
                hideMode: 'offsets'
            });
            
            var details_btn = new Ext.Button({
                text: "Details",
                enableToggle: true,
                toggleHandler: function(btn,toggled) {
                    //~ console.log(btn,toggled);
                    if (toggled) {
                        //~ main.add(details_panel);
                        details_panel.show();
                        win.setHeight(expanded_height);
                    }else{
                        //~ main.remove(details_panel,false);
                        details_panel.hide();
                        win.setHeight(collapsed_height);
                    };
                    //~ win.doLayout();
                    },
                hideMode: 'offsets'
            });
            
            var buttons = [details_btn,ok];
            
            win = new Ext.Window({
                autoCreate : true,
                title:title,
                //~ resizable:false,
                //~ autoDestroy: false,
                constrain:true,
                constrainHeader:true,
                minimizable : false,
                maximizable : false,
                stateful: false,
                modal: true,
                cls: 'x-window-dlg',
                shim:true,
                buttonAlign:"center",
                width:400,
                height:collapsed_height,
                //~ height:'auto',
                minHeight: 80,
                plain:true,
                footer:true,
                closable:true,
                close : function(){ win.hide() },
                fbar: new Ext.Toolbar({
                    items: buttons,
                    enableOverflow: false
                }),
                layout:"fit",
                items: main
            });
        };
        message_panel.html = message_html;
        details_panel.html = details_html;
        details_panel.hide();
        win.setHeight(collapsed_height);
        win.show();
    };
    
    return { show: show };
}();

function action_feedback1(title,message_html,details_html) {
    var msg = 'Are you sure? <a href="oops">(click!)</a>';
    Ext.MessageBox.buttonText.foo = "Three";
    Ext.MessageBox.buttonText.bar = "Four";
    Ext.MessageBox.show({
       title:'Messagebox title?',
       msg: msg,
       buttons: {ok:true,yes:true, foo:true, bar:true}, // Ext.Msg.YESNOCANCEL,
       fn: f1,
       animEl: 'elId',
       icon: Ext.MessageBox.QUESTION
    });
};


Ext.onReady(function(){
    //~ var msg = {xtype:"panel",layout:"fit",items:[{html:"Message text"}]};
    Lino.ActionFeedback.show("Action feedback:","Message text",
      "<pre>Detailed text<br>with several <b>formatted</b>lines</pre>");
      
    //~ action_feedback1();
    
    
}); // end of onReady()
</script></head><body>
<div id="body"></div>
</body></html>
